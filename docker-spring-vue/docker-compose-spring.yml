version: '3.1'

services:
  pms-backend:
    image: openjdk:11.0.11-jdk-slim
    container_name: pms-backend
    restart: always
    command: "java -Dspring.profiles.active=release -jar /usr/src/jar/open-dashboard-server-0.0.1-SNAPSHOT.jar"
    ports:
      - "8200:8310"
    volumes:
      - /swhome/pms/pms-backend/volume/jar:/usr/src/jar
      - /swhome/pms/pms-frontend/volume/nginx/html/attachments:/project/openDashBoardFront/dist/attachments
      - /swhome/pms/pms-frontend/volume/nginx/html/profile/images:/project/openDashBoardFront/dist/profile/images
      - /swhome/pms/pms-backend/volume/logs:/project/logs
    networks:
      - pms-network
networks:
  pms-network:
  # 서버(백엔드)와 동일한 네트워크를 사용하기 위해 외부 네트워크로 설정
    external: true